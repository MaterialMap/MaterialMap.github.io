<!-- Gibson-Ashby Calculator Template -->
<div class="container" id="calculator-container">
    <h1>Gibson-Ashby & Deshpande-Fleck Models for Cellular Foams</h1>
    
    <!-- Disclaimer -->
    <div style="margin-bottom: 30px; padding: 20px; background: #fff3cd; border-radius: 8px; border-left: 4px solid #ffc107; border: 1px solid #ffeaa7;">
        <h3 style="margin: 0 0 10px 0; color: #856404; font-size: 18px;">‚ö†Ô∏è Important Disclaimer</h3>
        <p style="margin: 0 0 10px 0; color: #856404; line-height: 1.6; font-size: 14px;">
            The Gibson-Ashby model describes the three-stage compression behavior of cellular foams: elastic, plateau, and densification. The Deshpande-Fleck extension adds isotropic hardening to the plateau region, where the slope is controlled by hardening coefficient H.
        </p>
        <p style="margin: 0 0 10px 0; color: #856404; line-height: 1.6; font-size: 14px;">
            <strong>References:</strong> Gibson, L.J., Ashby, M.F., "Cellular Solids: Structure and Properties", 2nd edition, Cambridge University Press, 1997. Deshpande, V.S., Fleck, N.A., "Isotropic constitutive models for metallic foams", Journal of the Mechanics and Physics of Solids, 2000.
        </p>
        <p style="margin: 0; color: #856404; line-height: 1.6; font-size: 14px; font-weight: 600;">
            <strong>Note:</strong> This interactive calculator shows typical foam behavior patterns. Use experimentally determined parameters for design calculations.
        </p>
    </div>

    <!-- Formula Information -->
    <div style="text-align: center; margin-bottom: 30px; padding: 20px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #3498db;">
        <h2 style="margin: 0; color: #2c3e50; font-size: 24px;">Gibson-Ashby & Deshpande-Fleck Models</h2>
        <div style="font-size: 22px; font-weight: bold; margin: 15px 0; color: #2c3e50; font-family: 'Times New Roman', serif;">
            E*/Es = C‚ÇÅ(œÅ*/œÅs)¬≤
        </div>
        <div style="font-size: 22px; font-weight: bold; margin: 15px 0; color: #2c3e50; font-family: 'Times New Roman', serif;">
            œÉ*/œÉs = C‚ÇÉ(œÅ*/œÅs)^1.5
        </div>
        <div style="font-size: 20px; font-weight: bold; margin: 15px 0; color: #e74c3c; font-family: 'Times New Roman', serif;">
            œÉ(Œµ) = œÉ<sub>pl</sub>[1 + H(Œµ - Œµ<sub>y</sub>)]
        </div>
        <div style="font-size: 14px; color: #7f8c8d; line-height: 1.5;">
            <strong>where:</strong> E* - foam elastic modulus, Es - solid elastic modulus, œÉ* - foam plateau stress, œÉs - solid yield strength, œÅ*/œÅs - relative density, C‚ÇÅ, C‚ÇÉ - material constants<br>
            <strong>Deshpande-Fleck:</strong> H - hardening coefficient (0 = pure plateau, >0 = hardening slope)
        </div>
    </div>
    
    <!-- Units Panel -->
    <div class="units-panel">
        <h3>
            <span>üîß Units Settings</span>
            <button class="units-toggle" onclick="calculator.toggleUnitsPanel()">Show/Hide</button>
        </h3>
        <div id="unitsSettings" class="units-grid" style="display: none;">
            <div class="unit-group">
                <label>Pressure/Stress Units:</label>
                <select id="pressureUnit" onchange="calculator.updateUnits()">
                    <option value="MPa" selected>Megapascal (MPa)</option>
                    <option value="Pa">Pascal (Pa)</option>
                    <option value="kPa">Kilopascal (kPa)</option>
                    <option value="GPa">Gigapascal (GPa)</option>
                    <option value="psi">Pounds per square inch (psi)</option>
                </select>
            </div>
            <div class="unit-group">
                <label>Density Units:</label>
                <select id="densityUnit" onchange="calculator.updateUnits()">
                    <option value="kg/m¬≥" selected>kg/m¬≥</option>
                    <option value="g/cm¬≥">g/cm¬≥</option>
                    <option value="lb/ft¬≥">lb/ft¬≥</option>
                </select>
            </div>
        </div>
    </div>

    <!-- Input Parameters -->
    <div class="inputs">
        <div class="input-item with-units">
            <label for="foamType">Foam Type:</label>
            <select id="foamType" onchange="calculator.scheduleCalculation()">
                <option value="eps">EPS (Expanded Polystyrene)</option>
                <option value="epp">EPP (Expanded Polypropylene)</option>
                <option value="pu">PU (Polyurethane)</option>
            </select>
        </div>
        <div class="input-item with-units">
            <label for="density">Foam Density:</label>
            <div class="input-with-units">
                <input type="number" id="density" step="0.1" value="25" min="10" max="200" oninput="calculator.scheduleCalculation()" onblur="calculator.validateDensity()">
                <span class="unit-display" id="densityUnitDisplay">kg/m¬≥</span>
            </div>
        </div>
        <div class="input-item with-units">
            <label for="hardeningCoeff">Hardening Coefficient, H:</label>
            <div class="input-with-units">
                <input type="number" id="hardeningCoeff" step="0.01" value="0" min="0" max="10" oninput="calculator.scheduleCalculation()" onblur="calculator.validateHardeningCoeff()">
                <span class="unit-display">-</span>
            </div>
        </div>
    </div>

    <!-- Output Results -->
    <div class="results" id="results" style="display: none;">
        <div class="result-item">
            <div class="result-name">Elastic Modulus, E*</div>
            <div class="result-value with-units">
                <span id="elasticModulus">-</span>
                <span class="result-unit" id="elasticModulusUnit">MPa</span>
            </div>
        </div>
        <div class="result-item">
            <div class="result-name">Plateau Stress, œÉ*</div>
            <div class="result-value with-units">
                <span id="plateauStress">-</span>
                <span class="result-unit" id="plateauStressUnit">MPa</span>
            </div>
        </div>
        <div class="result-item">
            <div class="result-name">Densification Strain, Œµd</div>
            <div class="result-value with-units">
                <span id="densificationStrain">60.0</span>
                <span class="result-unit">%</span>
            </div>
        </div>
        <div class="result-item">
            <div class="result-name">Energy Absorption, W</div>
            <div class="result-value with-units">
                <span id="energyAbsorption">-</span>
                <span class="result-unit" id="energyAbsorptionUnit">MJ/m¬≥</span>
            </div>
        </div>
    </div>
</div>

<!-- Interactive Chart Section -->
<div class="container" id="chartContainer" style="display: none;">
    <h2 class="collapsible-header collapsed" onclick="calculator.toggleCollapse(this)">Interactive Gibson-Ashby & Deshpande-Fleck Compression Curve</h2>
    <div class="collapsible-content collapsed">
        <div class="chart-container">
            <div id="chartSvg" style="width: 100%; height: 600px;">
                <!-- Chart will be generated here -->
            </div>
        </div>
    </div>
</div>

<!-- Data Table Section -->
<div class="container" id="tableContainer" style="display: none;">
    <h2 class="collapsible-header collapsed" onclick="calculator.toggleCollapse(this)">Gibson-Ashby Curve Data Points</h2>
    <div class="collapsible-content collapsed">
        <div class="table-header">
            <div></div>
            <button class="export-btn" onclick="calculator.exportToCSV()">üìä Export CSV</button>
        </div>
        <div class="table-container">
            <table id="propertiesTable">
                <thead>
                    <tr>
                        <th>Strain, Œµ [%]</th>
                        <th>Stress, œÉ [MPa]</th>
                        <th>Stage</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                </tbody>
            </table>
        </div>
    </div>
</div>